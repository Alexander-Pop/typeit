/**
  *
  * TypeIt - The most versatile animated typing utility on the planet.
  * Author: Alex MacArthur <alex@macarthur.me> (https://macarthur.me)
  * Version: v6.1.1
  * License: GPL-2.0
  * URL: https://typeitjs.com
  *
  */
"use strict";(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.TypeIt=b())})(void 0,function(){'use strict';function a(){var a=this;let b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;this.insert=(a,b)=>{this.waiting.splice(a,0,b)},this.add=function(b){let c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return Array.isArray(b[0])?(a.waiting=a.waiting.concat(b),a):(a.waiting[c?"unshift":"push"](b),a)},this.delete=a=>(this.waiting.splice(a,1),this),this.reset=()=>(this.waiting=this.executed.concat(this.waiting),this.executed=[],this),this.executed=[],this.waiting=b,!b.length&&c&&this.add(c)}function b(a,b){return Math.abs(Math.random()*(a+b-(a-b))+(a-b))}function c(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"",c=n("style");c.id=b,c.appendChild(document.createTextNode(a)),document.head.appendChild(c)}function d(){return Math.random().toString(36).substring(2,15)}function e(a){return a.map(a=>a.replace(/<\!--.*?-->/g,""))}function f(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",d=n(a);return b.forEach(a=>{d.setAttribute(a.name,a.value)}),d.innerHTML=c,d}function g(a){let b=v(a),c=x(b);return B(c)}function h(a){let b=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];return b?g(a):a.split("")}function i(a,c,d){c=null===c?a/3:c;let e=c/2;return d?[b(a,a/2),b(c,e)]:[a,c]}function j(){var b=this;let{typeIt:d,element:f,id:k,options:l,queue:r=[],isAReset:s=!1}=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};const u=()=>{let a=q(this.$e.childNodes).filter(a=>!a.isEqualNode(A));return B(a,!1)},w=function(a){let c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,d=b.opts.nextStringDelay;b.queue.insert(a,[b.pause,d.before]),b.queue.insert(a+c+1,[b.pause,d.after])},x=()=>{F||!this.opts.cursor||(c("@keyframes blink-".concat(k," { 0% {opacity: 0} 49% {opacity: 0} 50% {opacity: 1} }[data-typeit-id='").concat(k,"'] .ti-cursor { animation: blink-").concat(k," ").concat(this.opts.cursorSpeed/1e3,"s infinite; }"),k),A=n("span"),A.innerHTML=v(this.opts.cursorChar).innerHTML,A.className="ti-cursor",A.setAttribute("style","display:inline;position:relative;font:inherit;color:inherit;line-height:inherit;"),this.$e.appendChild(A))};this.wait=function(a,b){this.timeouts.push(setTimeout(a,b))};const y=a=>{this.queue.reset().delete(0).add([this.pause,a.before],!0);for(let b=0;b<u().length;b++)this.queue.add([this.delete,null,{isPhantom:!0}],!0)},z=a=>{let b=this.$e.innerHTML;return b?(this.$e.innerHTML="",this.opts.startDelete?(g(b).forEach(a=>{t(this.$e,a)}),this.queue.add([this.delete,!0]),w(1),a):[b.trim()].concat(a)):a};this.pause=function(){let a=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];return new Promise(b=>{this.wait(()=>b(),a?a:this.opts.nextStringDelay.total)})},this.reset=function(){return this.queue.reset(),new j({typeIt:d,element:this.$e,id:k,options:this.opts,queue:this.queue.waiting,isAReset:!0})},this.init=function(){if(!this.status.started){if(x(),!this.opts.waitUntilVisible)return this.status.started=!0,this.fire();let a=new IntersectionObserver((a,b)=>{a.forEach(a=>{a.isIntersecting&&(this.fire(),b.unobserve(this.$e))})},{threshold:1});a.observe(this.$e)}},this.fire=function(){let a=this.queue.waiting.slice(),b=Promise.resolve();for(let c=0;c<a.length;c++){let e=a[c],f=[e,this.queue,d];b=b.then(()=>new Promise((a,b)=>this.status.frozen?b():void(this.pace=i(this.opts.speed,this.opts.deleteSpeed,this.opts.lifeLike),e[2]&&e[2].isFirst&&this.opts.beforeString(...f),this.opts.beforeStep(...f),e[0].call(this,e[1],e[2]).then(()=>{let b=this.queue.waiting.shift();return e[2]&&e[2].isPhantom?a():(e[2]&&e[2].isLast&&this.opts.afterString(...f),this.opts.afterStep(...f),this.queue.executed.push(b),a())}))))}b.then(()=>{if(this.opts.loop){let a=this.opts.loopDelay?this.opts.loopDelay:this.opts.nextStringDelay;this.wait(()=>{y(a),this.fire()},a.after)}return this.status.completed=!0,void this.opts.afterComplete(d)}).catch(()=>{})},this.type=function(a){return"object"!=typeof a||a.content?new Promise(b=>{this.wait(()=>(t(this.$e,a),b()),this.pace[0])}):(t(this.$e,a),Promise.resolve())},this.empty=function(){return new Promise(a=>(F?this.$e.value="":q(this.$e.childNodes).forEach(a=>{A.isEqualNode(a)||E(a)}),a()))},this.delete=function(){let a=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];return new Promise(b=>{this.wait(()=>{let c=u();return c.length&&E(c[c.length-1]),H(this.$e),a&&0<c.length-1?this.delete(!0).then(()=>b()):b()},this.pace[1])})},this.setOptions=function(a){return new Promise(b=>(this.opts=Object.assign({},this.opts,a),b()))};let A=null,F=o(f);this.status={started:!1,complete:!1,frozen:!1,destroyed:!1},this.$e=f,this.timeouts=[],this.opts=Object.assign({},m,l),this.opts.html=!F&&this.opts.html,this.opts.nextStringDelay=I(this.opts.nextStringDelay),this.opts.loopDelay=I(this.opts.loopDelay),this.queue=new a(r,[this.pause,this.opts.startDelay]),this.$e.setAttribute("data-typeit-id",k),c("[data-typeit-id]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}"),C(f,F);let G=p(this.opts.strings);G=z(G),this.opts.strings=e(G),this.opts.strings.length&&!s&&(()=>{this.opts.strings.forEach((a,b)=>{let c=h(a,this.opts.html);this.queue.add(D(c,this.type,!0));let d=this.queue.waiting.length;return b+1===this.opts.strings.length?void 0:this.opts.breakLines?(this.queue.add([this.type,n("BR")]),void w(d)):void(this.queue.add(D(c,this.delete)),w(d,a.length))})})()}function k(a,b,c){return!!a.length&&!a.some(function(a){return a.status[b]!==c})}function l(a){return"string"==typeof a?a=document.querySelectorAll(a):!a.forEach&&(a=[a]),q(a)}var m={strings:[],speed:100,cursor:!0,cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,lifeLike:!0,breakLines:!0,startDelay:250,startDelete:!1,nextStringDelay:750,loop:!1,loopDelay:750,html:!0,waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},n=a=>document.createElement(a),o=a=>-1<["textarea","input"].indexOf(a.tagName.toLowerCase()),p=a=>Array.isArray(a)?a:[a],q=a=>[].slice.call(a);const r=(a,b)=>{let c=a.nextSibling;return!!c&&!c.isEqualNode(b)};var s=(a,b)=>{if(!a)return!1;let c=!1,d=[],e=a;for(;!c;)d.push(r(e,b)),e=e.parentNode,(!e||e.hasAttribute("data-typeit-id"))&&(c=!0);return!d.some(a=>a)},t=(a,b)=>{let c=b;if(o(a))return void(a.value="".concat(a.value).concat(c));let d=q(a.childNodes).filter(a=>a.classList&&a.classList.contains("ti-cursor"));if(d=d.length?d[0]:null,"object"==typeof b&&!(b instanceof HTMLElement)){let e=b.ancestorTree.slice(0),g=e.reverse().join(" "),h=q(a.querySelectorAll("".concat(g))),i=h[h.length-1];if(i&&s(i,d))a=i,c=b.content;else if(c=f(b.ancestorTree[0],b.attributes,b.content),1<b.ancestorTree.length){let c=q(a.querySelectorAll(b.ancestorTree[1]));a=c[c.length-1]}}c="object"==typeof c?c:document.createTextNode(c),a.insertBefore(c,d&&a.hasAttribute("data-typeit-id")?d:null)},u=a=>{let b=[];return b.concat.apply(b,a)},v=a=>{let b=document.implementation.createHTMLDocument("");return b.body.innerHTML=a,b.body};const w=a=>q(a.attributes).map(a=>({name:a.name,value:a.nodeValue})),x=a=>q(a.childNodes).map(a=>3===a.nodeType?a.nodeValue.split(""):a),y=(a,b,c)=>({ancestorTree:b,attributes:w(a),content:c}),z=(a,b)=>{let c=y(a,b,""),d=x(a).map(c=>Array.isArray(c)?c.map(c=>y(a,b,c)):c);return d.unshift(c),u(d)},A=a=>a instanceof HTMLElement&&"BR"!==a.tagName,B=function a(b){let c=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],d=b.map(a=>{if(A(a)){if(!c)return q(a.childNodes);let b=a.parentNode,d=[a.tagName];for(;0>["BODY","HTML"].indexOf(b.tagName);)d.push(b.tagName),b=b.parentNode;return z(a,d)}return a});return d=u(d),d.some(a=>A(a))?a(d,c):d};var C=(a,b)=>b?void(a.value=""):void(a.querySelector(".ti-cursor")&&(a.innerHTML="")),D=function(a,b){let c=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],d=!Array.isArray(a),e=a.length;return a=d?Array(a).fill(0):a,a.map((a,f)=>{if(d)return b;let g=[b,a];return c&&(0===f&&g.push({isFirst:!0}),f+1===e&&g.push({isLast:!0})),g})},E=a=>{a.parentNode.removeChild(a)};const F=a=>3!==a.nodeType&&"BR"!==a.tagName&&!a.firstChild,G=a=>a.some(a=>F(a));var H=a=>{let b=q(a.querySelectorAll("*")),c=G(b);for(;b.length&&c;){let d=!1;b.forEach(a=>{F(a)&&(E(a),d=!0)}),d&&(b=q(a.querySelectorAll("*"))),c=G(b)}return b},I=a=>(Array.isArray(a)||(a=[a/2,a/2]),{before:a[0],after:a[1],total:a[0]+a[1]});return function(a,b){var c=this;this.instances=l(a).map(a=>new j({typeIt:this,element:a,id:d(),options:b,queue:[],isAReset:!1}));const e=a=>{this.instances.forEach(b=>{a.call(this,b)})},f=function(a){let b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;e(e=>{let f="string"!=typeof a,g=f?a:e[a],h=f?c:b,i=D(d,[g,h]);e.queue.add(i)})};this.is=function(a){return k(this.instances,a,!0)},this.freeze=function(){e(a=>{a.status.frozen=!0})},this.unfreeze=function(){e(a=>{a.status.frozen&&(a.status.frozen=!1,a.fire())})},this.type=function(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e(b=>{let c=h(a,b.opts.html);b.queue.add(D(c,b.type,!0))}),this},this.delete=function(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return f("delete",null===a,null===a?1:a),this},this.pause=function(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return f("pause",a),this},this.break=function(){return f("type",n("BR")),this},this.options=function(a){return f("setOptions",a),this},this.exec=function(a){return f(a),this},this.destroy=function(){let a=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0];this.instances=this.instances.map(b=>{if(b.timeouts.forEach(a=>{clearTimeout(a)}),b.timeouts=[],a){let a=b.isInput?null:b.$e.querySelector(".ti-cursor");a&&b.$e.removeChild(a)}return b.status.destroyed=!0,b})},this.empty=function(){return f("empty"),this},this.reset=function(){return this.destroy(),this.instances=this.instances.map(a=>a.reset()),this},this.go=function(){return e(a=>{a.init()}),this}}});
